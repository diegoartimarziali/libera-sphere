"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6717],{56717:(e,o,r)=>{r.d(o,{refundBonus:()=>t});var a=r(14585),s=r(19708);async function t(e,o,r){try{let t=Array.isArray(o)?o:[o],u=r;for(let o of t.reverse()){if(u<=0)break;let r=(0,s.doc)(a.db,"users",e,"userAwards",o),t=await (0,s.getDoc)(r);if(t.exists()){let e=t.data(),a=e.value||0,n=e.usedValue||0,c=Math.min(u,n),i=Math.max(0,n-c),d=a-i;await (0,s.updateDoc)(r,{usedValue:i,residuo:d,used:0===d}),u-=c,console.log("[refundBonus] Riaccreditato ".concat(c,"€ al bonus ").concat(o,". Nuovo residuo: ").concat(d,"€"))}}u>0&&console.warn("[refundBonus] Non \xe8 stato possibile rimborsare completamente. Residuo: ".concat(u,"€"))}catch(e){throw console.error("[refundBonus] Errore durante il rimborso:",e),e}}}}]);