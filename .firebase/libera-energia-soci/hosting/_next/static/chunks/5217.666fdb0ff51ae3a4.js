"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5217],{45217:(e,s,a)=>{a.r(s),a.d(s,{createUserAward:()=>u,getUserAwards:()=>o,useUserAward:()=>d});var t=a(14585),r=a(19708);async function u(e,s,a,u){let d={awardId:s,name:a,value:u,usedValue:0,residuo:u,used:!1,assignedAt:r.Timestamp.now()};await (0,r.setDoc)((0,r.doc)(t.db,"users",e,"userAwards",s),d)}async function d(e,s,a){let u=(0,r.doc)(t.db,"users",e,"userAwards",s),d=await (0,r.getDoc)(u);if(!d.exists())throw Error("Premio non trovato");let o=d.data(),c=o.usedValue+a;c>o.value&&(c=o.value);let n=Math.max(0,o.value-c);await (0,r.updateDoc)(u,{usedValue:c,residuo:n,used:0===n})}async function o(e){return(await (0,r.getDocs)((0,r.collection)(t.db,"users",e,"userAwards"))).docs.map(e=>e.data())}}}]);