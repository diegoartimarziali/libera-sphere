(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{3998:(e,r,s)=>{"use strict";s.d(r,{$:()=>d,r:()=>l});var t=s(95155),a=s(12115),i=s(32467),o=s(83101),n=s(64269);let l=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-my-gialoro text-my-marscuro-foreground hover:bg-my-gialoro",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground hover:bg-success/90",gold:"bg-[hsl(var(--my-gialoro))] text-[hsl(var(--my-marscuro))] hover:bg-[hsl(var(--my-gialoro))]/90 border-2 border-[hsl(var(--background))]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:s,variant:a,size:o,asChild:d=!1,...c}=e,m=d?i.DX:"button";return(0,t.jsx)(m,{className:(0,n.cn)(l({variant:a,size:o,className:s})),ref:r,...c})});d.displayName="Button"},11977:(e,r,s)=>{Promise.resolve().then(s.bind(s,52973))},14585:(e,r,s)=>{"use strict";s.d(r,{IG:()=>c,db:()=>d,j2:()=>l});var t=s(52078),a=s(19708),i=s(58134),o=s(59253);let n=(0,t.Dk)().length?(0,t.Sx)():(0,t.Wp)({apiKey:"AIzaSyAeNVPO7H0mlsM3FXjjZJqpeB5Fi6ITISw",authDomain:"libera-energia-soci.firebaseapp.com",projectId:"libera-energia-soci",storageBucket:"libera-energia-soci.firebasestorage.app",messagingSenderId:"371255545862",appId:"1:371255545862:web:295479b2e6d2dadebaf387",measurementId:"G-4NWSYM1KPW"}),l=(0,o.xI)(n),d=(0,a.getFirestore)(n),c=(0,i.c7)(n)},15894:(e,r,s)=>{"use strict";s.d(r,{dj:()=>m});var t=s(12115);let a=0,i=new Map,o=e=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,r)},n=[],l={toasts:[]};function d(e){l=((e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=r;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}})(l,e),n.forEach(e=>{e(l)})}function c(e){let{...r}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...r,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,r]=t.useState(l);return t.useEffect(()=>(n.push(r),()=>{let e=n.indexOf(r);e>-1&&n.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},41052:(e,r,s)=>{"use strict";s.d(r,{C5:()=>h,MJ:()=>g,eI:()=>p,lR:()=>x,lV:()=>d,zB:()=>m});var t=s(95155),a=s(12115),i=s(32467),o=s(22544),n=s(64269),l=s(76444);let d=o.Op,c=a.createContext({}),m=e=>{let{...r}=e;return(0,t.jsx)(c.Provider,{value:{name:r.name},children:(0,t.jsx)(o.xI,{...r})})},u=()=>{let e=a.useContext(c),r=a.useContext(f),{getFieldState:s,formState:t}=(0,o.xW)(),i=s(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...i}},f=a.createContext({}),p=a.forwardRef((e,r)=>{let{className:s,...i}=e,o=a.useId();return(0,t.jsx)(f.Provider,{value:{id:o},children:(0,t.jsx)("div",{ref:r,className:(0,n.cn)("space-y-2",s),...i})})});p.displayName="FormItem";let x=a.forwardRef((e,r)=>{let{className:s,...a}=e,{error:i,formItemId:o}=u();return(0,t.jsx)(l.J,{ref:r,className:(0,n.cn)(i&&"text-destructive",s),htmlFor:o,...a})});x.displayName="FormLabel";let g=a.forwardRef((e,r)=>{let{...s}=e,{error:a,formItemId:o,formDescriptionId:n,formMessageId:l}=u();return(0,t.jsx)(i.DX,{ref:r,id:o,"aria-describedby":a?"".concat(n," ").concat(l):"".concat(n),"aria-invalid":!!a,...s})});g.displayName="FormControl",a.forwardRef((e,r)=>{let{className:s,...a}=e,{formDescriptionId:i}=u();return(0,t.jsx)("p",{ref:r,id:i,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})}).displayName="FormDescription";let h=a.forwardRef((e,r)=>{var s;let{className:a,children:i,...o}=e,{error:l,formMessageId:d}=u(),c=l?String(null!=(s=null==l?void 0:l.message)?s:""):i;return c?(0,t.jsx)("p",{ref:r,id:d,className:(0,n.cn)("text-sm font-medium text-destructive",a),...o,children:c}):null});h.displayName="FormMessage"},52973:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>T});var t=s(95155),a=s(12115),i=s(20063),o=s(22544),n=s(66942),l=s(98734),d=s(14585),c=s(59253),m=s(19708),u=s(15239),f=s(3998),p=s(86948),x=s(65142),g=s(41052),h=s(25667),b=s(64269);let v=h.bL,j=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(h.B8,{ref:r,className:(0,b.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});j.displayName=h.B8.displayName;let y=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(h.l9,{ref:r,className:(0,b.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-bold text-[hsl(var(--background))] ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-[hsl(var(--foreground))] bg-transparent disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-[hsl(var(--my-gialoro))] data-[state=active]:text-[hsl(var(--my-marscuro))] data-[state=active]:shadow-sm data-[state=active]:font-medium",s),...a})});y.displayName=h.l9.displayName;let w=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(h.UC,{ref:r,className:(0,b.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});w.displayName=h.UC.displayName;var N=s(15894),I=s(92033);let S=l.Ik({email:l.Yj().email({message:"Indirizzo email non valido."}),password:l.Yj().min(1,{message:"La password \xe8 richiesta."})}),R=l.Ik({name:l.Yj().min(2,{message:"Il nome \xe8 richiesto."}),surname:l.Yj().min(2,{message:"Il cognome \xe8 richiesto."}),email:l.Yj().email({message:"Indirizzo email non valido."}),password:l.Yj().min(6,{message:"La password deve contenere almeno 6 caratteri."})}),C=e=>e?e.split(" ").map(e=>(e=>e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e)(e)).join(" "):e;function T(){let e=(0,i.useRouter)(),{toast:r}=(0,N.dj)(),[s,l]=(0,a.useState)(!1),[h,b]=(0,a.useState)("login"),T=(0,o.mN)({resolver:(0,n.u)(S),defaultValues:{email:"",password:""}}),A=(0,o.mN)({resolver:(0,n.u)(R),defaultValues:{name:"",surname:"",email:"",password:""}}),z=async s=>{l(!0);try{await (0,c.x9)(d.j2,s.email.toLowerCase(),s.password),e.push("/dashboard")}catch(s){let e="Email o password non corretti. Riprova.";("auth/user-not-found"===s.code||"auth/invalid-credential"===s.code)&&(e="Nessun account trovato con queste credenziali. Prova a registrarti."),r({variant:"destructive",title:"Errore di accesso",description:e}),l(!1)}},k=async s=>{l(!0);let t=s.email.toLowerCase(),a=C(s.name.trim()),i=C(s.surname.trim());try{let r=(await (0,c.eJ)(d.j2,t,s.password)).user;await (0,m.setDoc)((0,m.doc)(d.db,"users",r.uid),{uid:r.uid,name:a,surname:i,email:t,createdAt:(0,m.serverTimestamp)(),regulationsAccepted:!1,medicalCertificateSubmitted:!1,applicationSubmitted:!1,associationStatus:"not_associated",isInsured:!1,progress:{presences:0},birthPlace:"",birthDate:null,taxCode:"",address:"",streetNumber:"",zipCode:"",city:"",province:"",phone:"",isFormerMember:"",hasPracticedBefore:"",discipline:"",lastGrade:""}),e.push("/dashboard")}catch(s){let e="Si \xe8 verificato un errore durante la registrazione.";"auth/email-already-in-use"===s.code&&(e="Questa email \xe8 gi\xe0 stata utilizzata. Prova ad accedere."),r({variant:"destructive",title:"Errore di registrazione",description:e}),l(!1)}};return(0,t.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center p-4 sm:p-8",style:{background:"var(--my-marscuro)"},children:[(0,t.jsxs)("div",{className:"flex flex-col items-center text-center mb-8",children:[(0,t.jsx)("div",{className:"mb-6 flex justify-center",children:(0,t.jsx)(u.default,{src:"https://firebasestorage.googleapis.com/v0/b/libera-energia-soci.firebasestorage.app/o/grafimg%2Flogo.png?alt=media&token=2ae6fdd4-f165-4603-b170-d832d97bd004",alt:"Logo Libera Energia",width:120,height:120,className:"rounded-full shadow-lg",priority:!0})}),(0,t.jsx)("h1",{className:"text-4xl font-bold my-gialoro",children:"LiberaSphere"}),(0,t.jsx)("p",{className:"text-lg my-gialoro mt-2",children:"Guerrieri digitali"})]}),(0,t.jsxs)(v,{value:h,onValueChange:e=>{l(!1),b(e)},className:"w-full max-w-md",children:[(0,t.jsxs)(j,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(y,{value:"login",children:"Accedi"}),(0,t.jsx)(y,{value:"register",children:"Registrati"})]}),(0,t.jsx)(w,{value:"login",children:(0,t.jsxs)(p.Zp,{children:[(0,t.jsxs)(p.aR,{children:[(0,t.jsx)(p.ZB,{children:"Bentornato"}),(0,t.jsx)(p.BT,{children:"Inserisci le tue credenziali per accedere."})]}),(0,t.jsx)(p.Wu,{children:(0,t.jsx)(g.lV,{...T,children:(0,t.jsxs)("form",{onSubmit:T.handleSubmit(z),className:"space-y-4",children:[(0,t.jsx)(g.zB,{control:T.control,name:"email",render:e=>{let{field:r}=e;return(0,t.jsxs)(g.eI,{children:[(0,t.jsx)(g.lR,{children:"Email"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(x.p,{placeholder:"tua@email.com",...r})}),(0,t.jsx)(g.C5,{})]})}}),(0,t.jsx)(g.zB,{control:T.control,name:"password",render:e=>{let{field:r}=e;return(0,t.jsxs)(g.eI,{children:[(0,t.jsx)(g.lR,{children:"Password"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(x.p,{type:"password",placeholder:"********",...r})}),(0,t.jsx)(g.C5,{})]})}}),(0,t.jsxs)(f.$,{type:"submit",variant:"gold",className:"w-full",disabled:s&&"login"===h,children:[s&&"login"===h&&(0,t.jsx)(I.A,{className:"mr-2 h-4 w-4 animate-spin"}),(0,t.jsx)("span",{className:"font-bold",children:"Accedi"})]})]})})})]})}),(0,t.jsx)(w,{value:"register",children:(0,t.jsxs)(p.Zp,{children:[(0,t.jsxs)(p.aR,{children:[(0,t.jsx)(p.ZB,{children:"Crea un nuovo account"}),(0,t.jsx)(p.BT,{children:"Registrati per iniziare il tuo percorso."})]}),(0,t.jsx)(p.Wu,{children:(0,t.jsx)(g.lV,{...A,children:(0,t.jsxs)("form",{onSubmit:A.handleSubmit(k),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsx)(g.zB,{control:A.control,name:"name",render:e=>{let{field:r}=e;return(0,t.jsxs)(g.eI,{children:[(0,t.jsx)(g.lR,{children:"Nome Allievo"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(x.p,{placeholder:"Mario",...r})}),(0,t.jsx)(g.C5,{})]})}}),(0,t.jsx)(g.zB,{control:A.control,name:"surname",render:e=>{let{field:r}=e;return(0,t.jsxs)(g.eI,{children:[(0,t.jsx)(g.lR,{children:"Cognome Allievo"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(x.p,{placeholder:"Rossi",...r})}),(0,t.jsx)(g.C5,{})]})}})]}),(0,t.jsx)(g.zB,{control:A.control,name:"email",render:e=>{let{field:r}=e;return(0,t.jsxs)(g.eI,{children:[(0,t.jsx)(g.lR,{children:"Email (sar\xe0 l'email di contatto)"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(x.p,{placeholder:"tua@email.com",...r})}),(0,t.jsx)(g.C5,{})]})}}),(0,t.jsx)(g.zB,{control:A.control,name:"password",render:e=>{let{field:r}=e;return(0,t.jsxs)(g.eI,{children:[(0,t.jsx)(g.lR,{children:"Password"}),(0,t.jsx)(g.MJ,{children:(0,t.jsx)(x.p,{type:"password",placeholder:"Minimo 6 caratteri",...r})}),(0,t.jsx)(g.C5,{})]})}}),(0,t.jsxs)(f.$,{type:"submit",variant:"gold",className:"w-full",disabled:s&&"register"===h,children:[s&&"register"===h&&(0,t.jsx)(I.A,{className:"mr-2 h-4 w-4 animate-spin"}),(0,t.jsx)("span",{className:"font-bold",children:"Registrati"})]})]})})})]})})]})]})}},64269:(e,r,s)=>{"use strict";s.d(r,{cn:()=>i});var t=s(2821),a=s(75889);function i(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.QP)((0,t.$)(r))}},65142:(e,r,s)=>{"use strict";s.d(r,{p:()=>o});var t=s(95155),a=s(12115),i=s(64269);let o=a.forwardRef((e,r)=>{let{className:s,type:a,...o}=e;return(0,t.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-black bg-white px-3 py-2 text-base text-black ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...o})});o.displayName="Input"},76444:(e,r,s)=>{"use strict";s.d(r,{J:()=>d});var t=s(95155),a=s(12115),i=s(10489),o=s(83101),n=s(64269);let l=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(i.b,{ref:r,className:(0,n.cn)(l(),s),...a})});d.displayName=i.b.displayName},86948:(e,r,s)=>{"use strict";s.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>o,aR:()=>n,wL:()=>m});var t=s(95155),a=s(12115),i=s(64269);let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});o.displayName="Card";let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});n.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})});m.displayName="CardFooter"}},e=>{e.O(0,[2992,7138,4909,3947,1930,2445,1821,5239,5370,8441,1255,7358],()=>e(e.s=11977)),_N_E=e.O()}]);