(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3903],{384:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(95155),r=s(86948),d=s(18510);function n(e){let{awards:t,onRefresh:s}=e;return t&&0!==t.length?(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"border rounded-lg p-4 flex items-center gap-4 ".concat(e.used?"bg-gray-100":"bg-white"," shadow-sm"),children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("span",{className:"inline-block px-3 py-1 rounded-full bg-green-100 text-green-800 font-semibold text-base border border-green-300",children:e.name||"Premio"})}),(0,a.jsxs)("div",{className:"text-sm font-bold text-green-700",children:["Valore residuo: ",(e.residuo||0).toFixed(2)," €"]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Valore iniziale: ",(e.value||0).toFixed(2)," €"]}),(0,a.jsxs)("div",{className:"text-sm text-orange-700",children:["Totale utilizzato: ",(e.usedValue||0).toFixed(2)," €"]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Assegnato il ",e.assignedAt?"function"==typeof e.assignedAt.toDate?e.assignedAt.toDate().toLocaleDateString():new Date(e.assignedAt).toLocaleDateString():"Data non disponibile"]}),e.used&&(0,a.jsx)("span",{className:"text-red-600 font-bold ml-2",children:"\uD83D\uDD34 UTILIZZATO"})]})},e.awardId))}):(0,a.jsx)("div",{className:"text-center text-muted-foreground",children:"Nessun premio assegnato"})}function i(){let e=(0,d.P)();return(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Il Mio Portafoglio"}),(0,a.jsx)(r.BT,{children:"Premi assegnati e bonus accumulati."})]}),(0,a.jsx)(r.Wu,{children:e?(0,a.jsx)(n,{awards:e}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center h-64 text-center text-muted-foreground border-2 border-dashed rounded-lg",children:(0,a.jsx)("span",{className:"text-xl font-semibold",children:"Caricamento premi..."})})})]})}s(12115)},14585:(e,t,s)=>{"use strict";s.d(t,{IG:()=>c,db:()=>l,j2:()=>o});var a=s(52078),r=s(19708),d=s(58134),n=s(59253);let i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyAeNVPO7H0mlsM3FXjjZJqpeB5Fi6ITISw",authDomain:"libera-energia-soci.firebaseapp.com",projectId:"libera-energia-soci",storageBucket:"libera-energia-soci.firebasestorage.app",messagingSenderId:"371255545862",appId:"1:371255545862:web:295479b2e6d2dadebaf387",measurementId:"G-4NWSYM1KPW"}),o=(0,n.xI)(i),l=(0,r.getFirestore)(i),c=(0,d.c7)(i)},15894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(12115);let r=0,d=new Map,n=e=>{if(d.has(e))return;let t=setTimeout(()=>{d.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);d.set(e,t)},i=[],o={toasts:[]};function l(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),i.forEach(e=>{e(o)})}function c(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:s});return l({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(o);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},18510:(e,t,s)=>{"use strict";s.d(t,{P:()=>c,f:()=>u});var a=s(95155),r=s(12115),d=s(19708),n=s(14585),i=s(15894),o=s(13328);let l=(0,r.createContext)(null);function c(){return(0,r.useContext)(l)}function u(e){let{children:t}=e,[s]=(0,o.hD)(n.j2),[c,u]=(0,r.useState)([]),f=(0,r.useRef)([]),{toast:m}=(0,i.dj)();return(0,r.useEffect)(()=>{if(!s){u([]),f.current=[];return}let e=(0,d.collection)(n.db,"users/".concat(s.uid,"/userAwards")),t=(0,d.onSnapshot)(e,async e=>{let t=await Promise.all(e.docs.map(async e=>{let t=e.data(),s=t.name,a=t.value;if((!s||"number"!=typeof a)&&t.awardId){let e=await (0,d.getDoc)((0,d.doc)(n.db,"awards",t.awardId));e.exists()&&(s=e.data().name,a=e.data().value)}return{id:e.id,awardId:t.awardId,name:s,value:a,residuo:t.residuo,usedValue:t.usedValue,used:t.used,assignedAt:t.assignedAt}}));f.current.length>0&&t.forEach(e=>{let t=f.current.find(t=>t.id===e.id);t&&e.residuo>t.residuo&&m({title:"Bonus riaccreditato",description:"Il tuo bonus di ".concat(e.residuo-t.residuo,"€ \xe8 stato riaccreditato perch\xe9 il pagamento non \xe8 stato accettato."),variant:"success"})}),f.current=t,u(t)});return()=>t()},[s,m]),(0,a.jsx)(l.Provider,{value:c,children:t})}},63748:(e,t,s)=>{Promise.resolve().then(s.bind(s,384))},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>d});var a=s(2821),r=s(75889);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},86948:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>u});var a=s(95155),r=s(12115),d=s(64269);let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",s),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",s),...r})});l.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"}},e=>{e.O(0,[2992,7138,4909,3947,3328,8441,1255,7358],()=>e(e.s=63748)),_N_E=e.O()}]);