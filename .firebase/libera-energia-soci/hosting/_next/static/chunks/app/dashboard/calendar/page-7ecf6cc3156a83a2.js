(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{3998:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,r:()=>o});var r=s(95155),a=s(12115),i=s(32467),n=s(83101),l=s(64269);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-my-gialoro text-my-marscuro-foreground hover:bg-my-gialoro",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground hover:bg-success/90",gold:"bg-[hsl(var(--my-gialoro))] text-[hsl(var(--my-marscuro))] hover:bg-[hsl(var(--my-gialoro))]/90 border-2 border-[hsl(var(--background))]"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:c=!1,...d}=e,u=c?i.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:n,className:s})),ref:t,...d})});c.displayName="Button"},14585:(e,t,s)=>{"use strict";s.d(t,{IG:()=>d,db:()=>c,j2:()=>o});var r=s(52078),a=s(19708),i=s(58134),n=s(59253);let l=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyAeNVPO7H0mlsM3FXjjZJqpeB5Fi6ITISw",authDomain:"libera-energia-soci.firebaseapp.com",projectId:"libera-energia-soci",storageBucket:"libera-energia-soci.firebasestorage.app",messagingSenderId:"371255545862",appId:"1:371255545862:web:295479b2e6d2dadebaf387",measurementId:"G-4NWSYM1KPW"}),o=(0,n.xI)(l),c=(0,a.getFirestore)(l),d=(0,i.c7)(l)},15894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var r=s(12115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=[],o={toasts:[]};function c(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),l.forEach(e=>{e(o)})}function d(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=r.useState(o);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},20063:(e,t,s)=>{"use strict";var r=s(47260);s.o(r,"redirect")&&s.d(t,{redirect:function(){return r.redirect}}),s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},32467:(e,t,s)=>{"use strict";s.d(t,{DX:()=>l,Dc:()=>c,TL:()=>n});var r=s(12115),a=s(94446),i=s(95155);function n(e){let t=function(e){let t=r.forwardRef((e,t)=>{let{children:s,...i}=e;if(r.isValidElement(s)){var n;let e,l,o=(n=s,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),c=function(e,t){let s={...t};for(let r in t){let a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?s[r]=(...e)=>{let t=i(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...i}:"className"===r&&(s[r]=[a,i].filter(Boolean).join(" "))}return{...e,...s}}(i,s.props);return s.type!==r.Fragment&&(c.ref=t?(0,a.t)(t,o):o),r.cloneElement(s,c)}return r.Children.count(s)>1?r.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=r.forwardRef((e,s)=>{let{children:a,...n}=e,l=r.Children.toArray(a),o=l.find(d);if(o){let e=o.props.children,a=l.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...n,ref:s,children:r.isValidElement(e)?r.cloneElement(e,void 0,a):null})}return(0,i.jsx)(t,{...n,ref:s,children:a})});return s.displayName=`${e}.Slot`,s}var l=n("Slot"),o=Symbol("radix.slottable");function c(e){let t=({children:e})=>(0,i.jsx)(i.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=o,t}function d(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}},36593:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(95155),a=s(12115),i=s(14585),n=s(19708),l=s(13328),o=s(15894);s(47691);var c=s(86948),d=s(18274),u=s(5225),m=s(6943),p=s(59338),x=s(28127),f=s(62593),h=s(10639),g=s(21255),v=s(15239),b=s(89106),y=s(84668);let j=e=>{let{icon:t,text:s}=e;return(0,r.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,r.jsx)(t,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,r.jsx)("span",{children:s})]})};function N(e){let{stage:t}=e;return(0,r.jsx)("div",{className:"rounded-lg shadow-2xl",style:{borderWidth:"4px",borderStyle:"solid",borderColor:"var(--my-marscuro)",background:"white",display:"block",width:"100%",height:"100%",padding:"16px",boxSizing:"border-box"},children:(0,r.jsxs)(c.Zp,{className:"flex flex-col bg-[var(--my-gialchiar)] text-[var(--my-marscuro)]",children:[t.imageUrl&&(0,r.jsx)("div",{className:"relative h-64 w-full bg-[var(--my-gialchiar)]",children:(0,r.jsx)(v.default,{src:t.imageUrl,alt:"Immagine per ".concat(t.title),layout:"fill",objectFit:"cover","data-ai-hint":"event martial-arts"})}),(0,r.jsx)(c.aR,{className:"p-0 bg-[var(--my-gialchiar)] text-[var(--my-marscuro)]",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1.5 p-6 rounded-t-md",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm font-semibold text-[var(--my-marscuro)]",children:[(e=>{switch(e){case"stage":return(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2 flex-shrink-0"});case"exam":return(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2 flex-shrink-0"});case"course":return(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2 flex-shrink-0"});default:return(0,r.jsx)(p.A,{className:"h-4 w-4 mr-2 flex-shrink-0"})}})(t.type),(e=>{switch(e){case"stage":return"Stage";case"exam":return"Esame";case"course":return"Corso";default:return"Evento"}})(t.type)]}),(0,r.jsx)("div",{className:"text-xs font-bold text-[var(--my-marscuro)]",children:t.discipline?"Disciplina: ".concat(t.discipline.charAt(0).toUpperCase()+t.discipline.slice(1)):""})]}),(0,r.jsx)(c.ZB,{className:"font-semibold tracking-tight text-xl capitalize text-[var(--my-marscuro)]",children:t.title}),(0,r.jsx)(c.BT,{className:"text-sm text-[var(--my-marscuro)]",children:t.description})]})}),(0,r.jsxs)(c.Wu,{className:"flex-grow space-y-3 text-[var(--my-marscuro)]",children:[(0,r.jsx)(j,{icon:x.A,text:t.startTime?(0,b.GP)(t.startTime.toDate(),"eeee d MMMM yyyy",{locale:y.it}):"Data da definire"}),(0,r.jsx)(j,{icon:f.A,text:t.startTime&&t.endTime?"".concat((0,b.GP)(t.startTime.toDate(),"HH:mm")," - ").concat((0,b.GP)(t.endTime.toDate(),"HH:mm")):"Orario da definire"}),(0,r.jsx)(j,{icon:h.A,text:t.location}),(0,r.jsx)(j,{icon:m.A,text:"Aperto a: ".concat(t.open_to)}),(0,r.jsx)(j,{icon:g.A,text:"Costo: ".concat(t.price.toFixed(2)," â‚¬")})]})]})})}function w(e){let{event:t}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center cursor-pointer group",onClick:t.onClick,children:[(0,r.jsx)("div",{className:"w-32 h-32 rounded-lg overflow-hidden border-4 border-[var(--my-marscuro)] bg-muted shadow-lg transition-transform group-hover:scale-105 group-hover:shadow-xl",children:t.iconUrl?(0,r.jsx)(v.default,{src:t.iconUrl,alt:t.type,width:128,height:128,style:{objectFit:"cover"}}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground text-2xl",children:"?"})}),(0,r.jsx)("div",{className:"mt-2 text-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1 mt-2",children:[(0,r.jsxs)("div",{className:"text-xs font-semibold text-[var(--my-marscuro)]",children:["Tipologia evento:"," ",t.type?(e=>{switch(e){case"stage":return"Stage";case"exam":return"Esame";case"course":return"Corso";case"lesson":return"Lezione";default:return"Evento"}})(t.type):""]}),(0,r.jsxs)("div",{className:"text-xs text-[var(--my-marscuro)]",children:["Disciplina:"," ",t.discipline?t.discipline.charAt(0).toUpperCase()+t.discipline.slice(1):""]}),(0,r.jsx)("div",{className:"text-xs font-semibold text-black",children:t.startTime?(0,b.GP)(t.startTime.toDate(),"dd MMM yyyy",{locale:y.it}):"Data da definire"}),(0,r.jsxs)("div",{className:"text-xs text-[var(--my-marscuro)]",children:["Aperto a: ",t.open_to?t.open_to:""]})]})})]})}var T=s(20063),S=s(3998),I=s(92033);async function C(e,t,s){let r=(0,n.doc)(i.db,"users",t,"userAwards",e),a=await (0,n.getDoc)(r);if(!a.exists())throw Error("UserAward non trovato");let l=a.data(),o="number"==typeof l.value?l.value:0,c="number"==typeof l.usedValue?l.usedValue:0,d=c+s;d>o&&(d=o);let u=Math.max(0,o-d),m=!1;0===u&&(m=!0),console.log("[updateUserBonus] awardId:",e,"userId:",t,"prevValue:",o,"prevUsedValue:",c,"bonusToUse:",s,"usedValue:",d,"residuo:",u,"used:",m),await (0,n.updateDoc)(r,{usedValue:d,residuo:u,used:m})}function k(e){let{title:t,price:l,sumupUrl:d,onClose:u,userId:m,eventId:p,eventType:x,discipline:f,onRefresh:h}=e,g=(0,T.useRouter)(),[v,b]=(0,a.useState)([]),[y,j]=(0,a.useState)(!1),{toast:N}=(0,o.dj)(),[w,k]=(0,a.useState)(!0),D=v.length>0&&v.some(e=>e.residuo>0&&!e.used),E=async()=>{try{let e=(0,n.collection)(i.db,"users/".concat(m,"/userAwards")),t=(await (0,n.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}));b(t)}catch(e){console.error("Errore nel recupero dei premi:",e),N({variant:"destructive",title:"Errore",description:"Impossibile recuperare i premi."})}finally{k(!1)}};(0,a.useEffect)(()=>{E()},[m,N]);let A=v.filter(e=>!e.used&&e.residuo>0).reduce((e,t)=>e+t.residuo,0),_=D?A>=l?l:A:0,P=D?Math.max(0,l-_):l,z=async()=>{let e,r=v.filter(e=>!e.used&&e.residuo>0).map(e=>e.id);try{e=await (0,n.addDoc)((0,n.collection)(i.db,"users/".concat(m,"/payments")),{eventId:p,amount:P,method:"gym",status:"pending",createdAt:n.Timestamp.now(),eventTitle:t,bonusUsed:_,awardId:1===r.length?r[0]:r,description:"Tipologia Evento: ".concat(x," - Disciplina: ").concat(f)})}catch(e){N({variant:"destructive",title:"Errore pagamento",description:"Impossibile registrare il pagamento. Riprova pi\xf9 tardi."});return}if((0,n.onSnapshot)(e,async e=>{let t=e.data();if(t&&"failed"===t.status&&t.bonusUsed>0&&t.awardId){let{refundUserBonus:e}=await s.e(2580).then(s.bind(s,22580));await e(m,t.awardId,t.bonusUsed),await E(),N({title:"Bonus riaccreditato",description:"Il tuo bonus di ".concat(t.bonusUsed,"â‚¬ \xe8 stato riaccreditato perch\xe9 il pagamento non \xe8 stato accettato."),variant:"success"})}}),(0,n.onSnapshot)(e,async e=>{let s=e.data();if(s&&"completed"===s.status){let e=(0,n.collection)(i.db,"users/".concat(m,"/attendances"));await (0,n.addDoc)(e,{lessonDate:n.Timestamp.now(),lessonTime:"",discipline:f,gymName:"",status:"presente",eventId:p,eventType:x,eventTitle:t})}}),D&&_>0){let e=_;for(let t of v.filter(e=>!e.used&&e.residuo>0)){if(e<=0)break;let s=Math.min(t.residuo,e);await C(t.id,m,s),e-=s}await E(),h&&h(),N({title:"Bonus applicato",description:"Utilizzati ".concat(_,"â‚¬ dal tuo bonus. ").concat(P>0?"Porta il saldo rimanente in palestra.":"Iscrizione completata!")})}N({title:P>0?"Pagamento in palestra selezionato":"Iscrizione completata",description:P>0?"Ti aspettiamo in palestra per completare l'iscrizione! (".concat(P,"â‚¬)"):"Iscrizione confermata con il tuo bonus!"}),u(),g.push("/dashboard")},R=async()=>{try{await (0,n.addDoc)((0,n.collection)(i.db,"users/".concat(m,"/payments")),{eventId:p,amount:P,method:"online",status:"pending",createdAt:n.Timestamp.now(),eventTitle:t,bonusUsed:_,description:"Tipologia Evento: ".concat(x," - Disciplina: ").concat(f)})}catch(e){N({variant:"destructive",title:"Errore pagamento",description:"Impossibile registrare il pagamento. Riprova pi\xf9 tardi."});return}if(!d)return void N({variant:"destructive",title:"Errore",description:"Link di pagamento non disponibile. Contatta la segreteria."});if(g.push("/dashboard"),0===P){N({title:"Iscrizione completata",description:"Iscrizione confermata con il tuo bonus!"}),u();return}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.Zp,{className:"w-full max-w-md mx-auto",children:[(0,r.jsx)(c.aR,{className:"text-center space-y-2",children:(0,r.jsx)(c.ZB,{className:"text-2xl font-bold text-[var(--my-marscuro)]",children:t})}),(0,r.jsx)(c.Wu,{className:"space-y-6",children:w?(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(I.A,{className:"h-6 w-6 animate-spin"})}):(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"text-center text-lg text-muted-foreground",children:"Scegli la modalit\xe0 di pagamento"}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1 mb-2",children:[(0,r.jsxs)("span",{className:"text-sm font-bold text-green-700",children:["Bonus totale disponibile: ",A,"â‚¬"]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Premi nel wallet:",(0,r.jsxs)("ul",{className:"list-disc ml-4",children:[v.filter(e=>!e.used&&e.residuo>0).map(e=>(0,r.jsxs)("li",{className:"font-semibold text-green-700",children:[e.name||"Premio",": ",e.residuo,"â‚¬"]},e.id)),v.filter(e=>e.used||0===e.residuo).map(e=>(0,r.jsxs)("li",{className:"text-muted-foreground",children:[e.name||"Premio",": 0â‚¬ ",(0,r.jsx)("span",{className:"italic",children:"(esaurito)"})]},e.id))]})]})]}),(0,r.jsx)("div",{className:"text-center font-semibold",children:D&&_>0?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-muted-foreground",children:["Prezzo stage: ",l,"â‚¬"]}),(0,r.jsxs)("p",{className:"text-xl text-green-600",children:["Da pagare: ",P,"â‚¬"]})]}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("p",{className:"text-xl",children:["Prezzo stage: ",l,"â‚¬"]})})})]}),(0,r.jsxs)("div",{className:"grid gap-4",children:[0===P?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"font-semibold text-green-700 text-center",children:["Residuo bonus dopo il pagamento: ",A-_,"â‚¬"]}),(0,r.jsx)(S.$,{variant:"default",size:"lg",className:"w-full text-lg font-bold bg-green-600 hover:bg-green-700 text-white",onClick:z,children:"Iscriviti"})]}):(0,r.jsx)(S.$,{variant:"outline",size:"lg",className:"w-full text-lg font-medium border-2 border-[var(--my-marscuro)] hover:bg-[var(--my-marscuro)] hover:text-white transition-colors",onClick:()=>j(!0),children:"Paga in Palestra"}),d&&P>0&&(0,r.jsx)(S.$,{size:"lg",className:"w-full text-lg font-medium bg-[var(--my-arancio)] hover:bg-[var(--my-aranscuro)] text-white transition-colors",onClick:R,children:"Paga Online con Carta"})]})]})})]}),y&&P>0&&(0,r.jsx)("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/40",onClick:()=>j(!1),children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-sm w-full p-6",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Conferma pagamento in palestra"}),(0,r.jsxs)("div",{className:"mb-4 space-y-1",children:[(0,r.jsxs)("div",{className:"font-semibold",children:["Importo stage: ",l,"â‚¬"]}),(0,r.jsxs)("div",{className:"font-semibold",children:["Bonus totale disponibile: ",(0,r.jsxs)("span",{className:"text-green-700",children:[A,"â‚¬"]})]}),(0,r.jsxs)("div",{className:"font-bold text-lg",children:["Da pagare in palestra: ",P,"â‚¬"]}),(0,r.jsxs)("div",{className:"font-semibold text-green-700",children:["Residuo bonus dopo il pagamento: ",A-_,"â‚¬"]})]}),(0,r.jsxs)("div",{className:"flex gap-2 justify-end mt-6",children:[(0,r.jsx)(S.$,{variant:"outline",onClick:()=>j(!1),children:"Annulla"}),(0,r.jsx)(S.$,{variant:"default",onClick:()=>{z(),j(!1)},children:"Conferma"})]})]})})]})}function D(){var e,t,s,c;let[d]=(0,l.hD)(i.j2),{toast:u}=(0,o.dj)(),[m,p]=(0,a.useState)(!0),[x,f]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[v,b]=(0,a.useState)(new Date),[y,j]=(0,a.useState)(null),[T,C]=(0,a.useState)(null),[D,E]=(0,a.useState)(null),[A,_]=(0,a.useState)(!1),[P,z]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{if(!d)return p(!1);p(!0);try{let e=(0,n.doc)(i.db,"users",d.uid),t=await (0,n.getDoc)(e);if(!t.exists()){u({variant:"destructive",title:"Errore",description:"Utente non trovato."}),p(!1);return}let s=t.data(),r=s.gym,a=s.discipline;if(j(a),r){let e=(0,n.doc)(i.db,"gyms",r),t=await (0,n.getDoc)(e);t.exists()&&C(t.data().name)}let l=n.Timestamp.now(),o=(0,n.collection)(i.db,"events");if(r&&a){let e=(0,n.query)(o,(0,n.where)("type","==","lesson"),(0,n.where)("gymId","==",r),(0,n.where)("discipline","==",a),(0,n.where)("startTime",">=",l),(0,n.orderBy)("startTime","asc")),t=(await (0,n.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()}));f(t)}let c=(0,n.query)(o,(0,n.where)("type","in",["stage","exam","course","other"]),(0,n.where)("startTime",">=",l),(0,n.orderBy)("startTime","asc")),m=(await (0,n.getDocs)(c)).docs.map(e=>({id:e.id,...e.data()})),x=await (0,n.getDocs)((0,n.collection)(i.db,"users",d.uid,"payments")),h=[];x.forEach(e=>{let t=e.data();t.eventId&&"completed"===t.status&&h.push(t.eventId)}),z(h),g(m),z(h)}catch(e){console.error("Error fetching events:",e),u({variant:"destructive",title:"Errore",description:"Impossibile caricare gli eventi del calendario."})}finally{p(!1)}})()},[d,u]),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"text-center md:text-left",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Stages, Esami e Corsi"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Qui trovi tutti gli stage, esami e corsi in programma e il calendario delle lezioni."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Eventi Speciali in Programma"}),m?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(I.A,{className:"h-12 w-12 animate-spin text-primary"})}):h.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:h.map(e=>{let t=P.includes(e.id);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(w,{event:{id:e.id,iconUrl:e.iconUrl||e.imageUrl,type:e.type,discipline:e.discipline,open_to:e.open_to,startTime:e.startTime,onClick:t?()=>{}:()=>E(e)}}),t&&(0,r.jsx)("span",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs font-bold px-2 py-1 rounded shadow",children:"Iscritto"})]},e.id)})}),D&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",onClick:()=>E(null),children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-lg w-full p-4",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)(N,{stage:{id:D.id,title:D.title,description:null!=(e=D.description)?e:"",startTime:D.startTime,endTime:D.endTime,location:null!=(t=D.location)?t:"",price:null!=(s=D.price)?s:0,imageUrl:D.imageUrl,open_to:"Cinture Nere"===D.open_to?"Cinture Nere":"Tutti",type:D.type,discipline:"karate"===D.discipline||"aikido"===D.discipline?D.discipline:void 0,requireConfirmation:null!=(c=D.requireConfirmation)&&c}}),(0,r.jsx)("div",{className:"mt-6 flex justify-end",children:P.includes(D.id)?(0,r.jsx)(S.$,{className:"w-full px-6 py-3 text-lg font-bold",variant:"secondary",disabled:!0,children:"Iscritto"}):(0,r.jsx)(S.$,{className:"w-full px-6 py-3 text-lg font-bold",variant:"default",onClick:()=>_(!0),children:"Iscriviti"})})]})}),A&&D&&(0,r.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40",onClick:()=>_(!1),children:(0,r.jsx)("div",{onClick:e=>e.stopPropagation(),className:"p-4 w-full max-w-lg",children:(0,r.jsx)(k,{title:D.title,price:D.price||0,sumupUrl:D.sumupUrl,onClose:()=>_(!1),userId:(null==d?void 0:d.uid)||"",eventId:D.id,eventType:D.type||"",discipline:D.discipline||""})})})]}):(0,r.jsxs)("div",{className:"text-center py-16 border rounded-lg",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Nessun Evento Speciale"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"Non ci sono stage, esami o corsi in programma."})]})]})]})}s(64269)},48041:(e,t,s)=>{Promise.resolve().then(s.bind(s,36593))},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(2821),a=s(75889);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},86948:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>u});var r=s(95155),a=s(12115),i=s(64269);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},94446:(e,t,s)=>{"use strict";s.d(t,{s:()=>n,t:()=>i});var r=s(12115);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(...e){return t=>{let s=!1,r=e.map(e=>{let r=a(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():a(e[t],null)}}}}function n(...e){return r.useCallback(i(...e),e)}}},e=>{e.O(0,[2992,7138,4909,3947,7134,3328,9106,5239,1164,8441,1255,7358],()=>e(e.s=48041)),_N_E=e.O()}]);